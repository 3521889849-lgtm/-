3.1.1 班次配置表（t_shift_config）
字段名	字段类型	主键/外键	非空	备注
shift_id	BIGINT	主键	是	班次ID（自增）
shift_name	VARCHAR(32)	-	是	班次名称（早班/中班/晚班/夜班）
start_time	TIME	-	是	班次开始时间（如08:00:00）
end_time	TIME	-	是	班次结束时间（如16:30:00）
min_staff	INT	-	是	在岗人数下限
is_holiday	TINYINT(1)	-	是	是否节假日班次（0-否，1-是）
create_time	DATETIME	-	是	创建时间
update_time	DATETIME	-	是	更新时间
create_by	VARCHAR(64)	-	是	创建人（管理员ID）
3.1.2 客服信息表（t_customer_service）
字段名	字段类型	主键/外键	非空	备注
cs_id	VARCHAR(32)	主键	是	客服ID（如KF001）
cs_name	VARCHAR(64)	-	是	客服姓名
dept_id	VARCHAR(32)	-	是	所属部门ID
team_id	VARCHAR(32)	-	否	所属班组ID（可为空）
skill_tags	VARCHAR(128)	-	否	技能标签（逗号分隔，如"票务查询,退款处理"）
status	TINYINT(1)	-	是	状态（0-离职，1-在职）
current_status	TINYINT(1)	-	是	当前排班状态（0-空闲，1-已排班，2-请假）
create_time	DATETIME	-	是	创建时间
update_time	DATETIME	-	是	更新时间
3.1.3 排班记录表（t_schedule）
字段名	字段类型	主键/外键	非空	备注
schedule_id	BIGINT	主键	是	排班记录ID（自增）
cs_id	VARCHAR(32)	外键（t_customer_service.cs_id）	是	客服ID
shift_id	BIGINT	外键（t_shift_config.shift_id）	是	班次ID
schedule_date	DATE	-	是	排班日期（如2025-08-16）
status	TINYINT(1)	-	是	状态（0-正常，1-请假，2-调班）
replace_cs_id	VARCHAR(32)	外键（t_customer_service.cs_id）	否	调班替换客服ID（状态为2时必填）
create_time	DATETIME	-	是	创建时间
update_time	DATETIME	-	是	更新时间
3.1.4 会话表（t_conversation）
字段名	字段类型	主键/外键	非空	备注
conv_id	VARCHAR(64)	主键	是	会话ID（UUID生成）
user_id	VARCHAR(64)	-	是	用户ID
user_nickname	VARCHAR(64)	-	否	用户昵称
cs_id	VARCHAR(32)	外键（t_customer_service.cs_id）	是	接待客服ID
source	VARCHAR(32)	-	是	咨询来源（APP/小程序/网页/H5）
start_time	DATETIME	-	是	会话开始时间
end_time	DATETIME	-	否	会话结束时间（未结束为空）
msg_type	TINYINT(1)	-	否	消息分类（0-咨询类，1-投诉类，2-建议类，3-其他类）
is_manual_adjust	TINYINT(1)	-	是	是否人工调整分类（0-否，1-是）
status	TINYINT(1)	-	是	会话状态（0-进行中，1-已结束）
create_time	DATETIME	-	是	创建时间
update_time	DATETIME	-	是	更新时间
3.1.5 会话消息表（t_conv_message）
字段名	字段类型	主键/外键	非空	备注
msg_id	BIGINT	主键	是	消息ID（自增）
conv_id	VARCHAR(64)	外键（t_conversation.conv_id）	是	会话ID
sender_type	TINYINT(1)	-	是	发送方类型（0-用户，1-客服，2-系统）
sender_id	VARCHAR(64)	-	是	发送方ID（用户ID/客服ID）
msg_content	TEXT	-	是	文本消息内容
file_url	VARCHAR(256)	-	否	附件URL（图片/文件，可为空）
file_type	VARCHAR(32)	-	否	附件类型（image/pdf/docx等，可为空）
voice_url	VARCHAR(256)	-	否	通话录音URL（可为空）
is_quick_reply	TINYINT(1)	-	是	是否快捷回复（0-否，1-是）
quick_reply_id	BIGINT	外键（t_quick_reply.reply_id）	否	快捷回复ID（可为空）
send_time	DATETIME	-	是	发送时间
3.1.6 快捷回复表（t_quick_reply）
字段名	字段类型	主键/外键	非空	备注
reply_id	BIGINT	主键	是	快捷回复ID（自增）
reply_type	TINYINT(1)	-	是	回复分类（0-咨询类，1-投诉类，2-建议类，3-通用类）
reply_content	TEXT	-	是	回复话术内容
create_by	VARCHAR(32)	外键（t_customer_service.cs_id）	是	创建人（管理员/客服）
is_public	TINYINT(1)	-	是	是否公共话术（0-个人，1-公共）
create_time	DATETIME	-	是	创建时间
update_time	DATETIME	-	是	更新时间
3.1.7 请假调班申请表（t_leave_transfer）
字段名	字段类型	主键/外键	非空	备注
apply_id	BIGINT	主键	是	申请ID（自增）
cs_id	VARCHAR(32)	外键（t_customer_service.cs_id）	是	申请人（客服ID）
apply_type	TINYINT(1)	-	是	申请类型（0-请假，1-调班）
target_date	DATE	-	是	请假/调班日期
shift_id	BIGINT	外键（t_shift_config.shift_id）	是	涉及班次ID
target_cs_id	VARCHAR(32)	外键（t_customer_service.cs_id）	否	调班目标客服ID（调班时必填）
approval_status	TINYINT(1)	-	是	审批状态（0-待审批，1-通过，2-拒绝）
approver_id	VARCHAR(32)	-	否	审批人ID（管理员ID）
approval_time	DATETIME	-	否	审批时间
reason	VARCHAR(256)	-	否	申请理由
create_time	DATETIME	-	是	创建时间
update_time	DATETIME	-	是	更新时间
3.2 索引设计
表名	索引字段	索引类型	用途
t_shift_config	shift_name, is_holiday	联合索引	快速查询班次配置
t_customer_service	cs_id, dept_id, skill_tags	普通索引	客服信息检索、技能匹配
t_schedule	cs_id, schedule_date	联合索引	查询客服指定日期排班
t_schedule	schedule_date, shift_id	联合索引	统计班次在岗人数
t_conversation	user_id, start_time	联合索引	查询用户历史会话
t_conversation	cs_id, start_time	联合索引	查询客服接待记录
t_conv_message	conv_id, send_time	联合索引	按会话ID查询消息流水
t_quick_reply	reply_type, is_public	联合索引	快速筛选快捷回复
t_leave_transfer	cs_id, approval_status	联合索引	查询客服申请记录